{"ast":null,"code":"var _jsxFileName = \"/home/krish/Documents/project/picrego main/picrego/Frontend/src/Components/Dashboards/UserManagement.js\",\n  _s = $RefreshSig$();\n// UserManagement.js\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './UserManagement.css'; // Create and style this file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserManagement = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [showPaidOnly, setShowPaidOnly] = useState(false);\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const token = sessionStorage.getItem('authToken');\n        const response = await axios.get('http://localhost:5001/api/users/admin-data', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUsers(response.data.users);\n        setFilteredUsers(response.data.users); // Initially set all users as filtered users\n      } catch (error) {\n        console.error('Error fetching users:', error);\n      }\n    };\n    fetchUsers();\n  }, []);\n  const handleFilterChange = () => {\n    setShowPaidOnly(!showPaidOnly);\n    if (!showPaidOnly) {\n      const paidPhotographers = users.filter(user => user.isPaid && user.role === 'photographer');\n      setFilteredUsers(paidPhotographers);\n    } else {\n      setFilteredUsers(users);\n    }\n  };\n  const handleDelete = async userId => {\n    try {\n      const token = sessionStorage.getItem('authToken');\n      await axios.delete(`http://localhost:5001/api/users/${userId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUsers(users.filter(user => user._id !== userId));\n      setFilteredUsers(filteredUsers.filter(user => user._id !== userId));\n    } catch (error) {\n      console.error('Error deleting user:', error);\n    }\n  };\n  const handleBlockToggle = async userId => {\n    try {\n      const token = sessionStorage.getItem('authToken');\n      const user = users.find(user => user._id === userId);\n      const newBlockStatus = !user.isBlocked;\n      await axios.put(`http://localhost:5001/api/users/${userId}`, {\n        isBlocked: newBlockStatus\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      // Update state to reflect new blocked status\n      const updatedUsers = users.map(user => user._id === userId ? {\n        ...user,\n        isBlocked: newBlockStatus\n      } : user);\n      setUsers(updatedUsers);\n      setFilteredUsers(updatedUsers);\n    } catch (error) {\n      console.error('Error updating block status:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-management-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"User Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        checked: showPaidOnly,\n        onChange: handleFilterChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), \"Show Paid Photographers Only\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-cards\",\n      children: filteredUsers.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Email: \", user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Role: \", user.role]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Plan: \", user.planName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Payment Status: \", user.isPaid ? 'Paid' : 'Unpaid']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Blocked: \", user.isBlocked ? 'Yes' : 'No']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(user._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleBlockToggle(user._id),\n          children: user.isBlocked ? 'Unblock' : 'Block'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, user._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(UserManagement, \"LyYHGblchG+AA/ikvIIjBaUJdsg=\");\n_c = UserManagement;\nexport default UserManagement;\nvar _c;\n$RefreshReg$(_c, \"UserManagement\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","UserManagement","_s","users","setUsers","filteredUsers","setFilteredUsers","showPaidOnly","setShowPaidOnly","fetchUsers","token","sessionStorage","getItem","response","get","headers","Authorization","data","error","console","handleFilterChange","paidPhotographers","filter","user","isPaid","role","handleDelete","userId","delete","_id","handleBlockToggle","find","newBlockStatus","isBlocked","put","updatedUsers","map","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","checked","onChange","name","email","planName","onClick","_c","$RefreshReg$"],"sources":["/home/krish/Documents/project/picrego main/picrego/Frontend/src/Components/Dashboards/UserManagement.js"],"sourcesContent":["// UserManagement.js\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './UserManagement.css'; // Create and style this file\n\nconst UserManagement = () => {\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [showPaidOnly, setShowPaidOnly] = useState(false);\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const token = sessionStorage.getItem('authToken');\n        const response = await axios.get('http://localhost:5001/api/users/admin-data', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setUsers(response.data.users);\n        setFilteredUsers(response.data.users); // Initially set all users as filtered users\n      } catch (error) {\n        console.error('Error fetching users:', error);\n      }\n    };\n\n    fetchUsers();\n  }, []);\n\n  const handleFilterChange = () => {\n    setShowPaidOnly(!showPaidOnly);\n    if (!showPaidOnly) {\n      const paidPhotographers = users.filter(user => user.isPaid && user.role === 'photographer');\n      setFilteredUsers(paidPhotographers);\n    } else {\n      setFilteredUsers(users);\n    }\n  };\n\n  const handleDelete = async (userId) => {\n    try {\n      const token = sessionStorage.getItem('authToken');\n      await axios.delete(`http://localhost:5001/api/users/${userId}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setUsers(users.filter(user => user._id !== userId));\n      setFilteredUsers(filteredUsers.filter(user => user._id !== userId));\n    } catch (error) {\n      console.error('Error deleting user:', error);\n    }\n  };\n\n  const handleBlockToggle = async (userId) => {\n    try {\n      const token = sessionStorage.getItem('authToken');\n      const user = users.find(user => user._id === userId);\n      const newBlockStatus = !user.isBlocked;\n      await axios.put(`http://localhost:5001/api/users/${userId}`, { isBlocked: newBlockStatus }, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      // Update state to reflect new blocked status\n      const updatedUsers = users.map(user =>\n        user._id === userId ? { ...user, isBlocked: newBlockStatus } : user\n      );\n      setUsers(updatedUsers);\n      setFilteredUsers(updatedUsers);\n    } catch (error) {\n      console.error('Error updating block status:', error);\n    }\n  };\n\n  return (\n    <div className=\"user-management-container\">\n      <h1>User Management</h1>\n      \n      {/* Filter Checkbox */}\n      <label>\n        <input\n          type=\"checkbox\"\n          checked={showPaidOnly}\n          onChange={handleFilterChange}\n        />\n        Show Paid Photographers Only\n      </label>\n\n      <div className=\"user-cards\">\n        {filteredUsers.map(user => (\n          <div className=\"user-card\" key={user._id}>\n            <h2>{user.name}</h2>\n            <p>Email: {user.email}</p>\n            <p>Role: {user.role}</p>\n            <p>Plan: {user.planName}</p>\n            <p>Payment Status: {user.isPaid ? 'Paid' : 'Unpaid'}</p>\n            <p>Blocked: {user.isBlocked ? 'Yes' : 'No'}</p>\n            <button onClick={() => handleDelete(user._id)}>Delete</button>\n            <button onClick={() => handleBlockToggle(user._id)}>\n              {user.isBlocked ? 'Unblock' : 'Block'}\n            </button>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default UserManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}