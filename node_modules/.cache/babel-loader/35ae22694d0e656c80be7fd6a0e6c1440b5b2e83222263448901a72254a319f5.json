{"ast":null,"code":"var _jsxFileName = \"/home/krish/Documents/project/picrego main/picrego/Frontend/src/Components/Dashboards/UserManagement.js\",\n  _s = $RefreshSig$();\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserManagement = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [showPaidOnly, setShowPaidOnly] = useState(false);\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const token = sessionStorage.getItem('authToken');\n        const response = await axios.get('http://localhost:5001/api/users/admin-data', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUsers(response.data.users);\n        setFilteredUsers(response.data.users); // Initially set all users as filtered users\n      } catch (error) {\n        console.error('Error fetching users:', error);\n      }\n    };\n    fetchUsers();\n  }, []);\n  const handleFilterChange = () => {\n    setShowPaidOnly(!showPaidOnly);\n    if (!showPaidOnly) {\n      const paidPhotographers = users.filter(user => user.isPaid && user.role === 'photographer');\n      setFilteredUsers(paidPhotographers);\n    } else {\n      setFilteredUsers(users);\n    }\n  };\n  const handleDelete = async userId => {\n    try {\n      const token = sessionStorage.getItem('authToken');\n      await axios.delete(`http://localhost:5001/api/users/${userId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUsers(users.filter(user => user._id !== userId));\n      setFilteredUsers(filteredUsers.filter(user => user._id !== userId));\n    } catch (error) {\n      console.error('Error deleting user:', error);\n    }\n  };\n  const handleBlock = async userId => {\n    try {\n      const token = sessionStorage.getItem('authToken');\n      await axios.put(`http://localhost:5001/api/users/${userId}`, {\n        isBlocked: true\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      // Update state to reflect blocked status\n      const updatedUsers = users.map(user => user._id === userId ? {\n        ...user,\n        isBlocked: true\n      } : user);\n      setUsers(updatedUsers);\n      setFilteredUsers(updatedUsers);\n    } catch (error) {\n      console.error('Error blocking user:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-management-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"User Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        checked: showPaidOnly,\n        onChange: handleFilterChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), \"Show Paid Photographers Only\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-cards\",\n      children: filteredUsers.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Email: \", user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Role: \", user.role]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Plan: \", user.planName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Payment Status: \", user.isPaid ? 'Paid' : 'Unpaid']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Blocked: \", user.isBlocked ? 'Yes' : 'No']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(user._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleBlock(user._id),\n          disabled: user.isBlocked,\n          children: \"Block\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, user._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(UserManagement, \"LyYHGblchG+AA/ikvIIjBaUJdsg=\");\n_c = UserManagement;\nexport default UserManagement;\nvar _c;\n$RefreshReg$(_c, \"UserManagement\");","map":{"version":3,"names":["UserManagement","_s","users","setUsers","useState","filteredUsers","setFilteredUsers","showPaidOnly","setShowPaidOnly","useEffect","fetchUsers","token","sessionStorage","getItem","response","axios","get","headers","Authorization","data","error","console","handleFilterChange","paidPhotographers","filter","user","isPaid","role","handleDelete","userId","delete","_id","handleBlock","put","isBlocked","updatedUsers","map","_jsxDEV","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","checked","onChange","name","email","planName","onClick","disabled","_c","$RefreshReg$"],"sources":["/home/krish/Documents/project/picrego main/picrego/Frontend/src/Components/Dashboards/UserManagement.js"],"sourcesContent":["const UserManagement = () => {\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [showPaidOnly, setShowPaidOnly] = useState(false);\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const token = sessionStorage.getItem('authToken');\n        const response = await axios.get('http://localhost:5001/api/users/admin-data', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setUsers(response.data.users);\n        setFilteredUsers(response.data.users); // Initially set all users as filtered users\n      } catch (error) {\n        console.error('Error fetching users:', error);\n      }\n    };\n\n    fetchUsers();\n  }, []);\n\n  const handleFilterChange = () => {\n    setShowPaidOnly(!showPaidOnly);\n    if (!showPaidOnly) {\n      const paidPhotographers = users.filter(user => user.isPaid && user.role === 'photographer');\n      setFilteredUsers(paidPhotographers);\n    } else {\n      setFilteredUsers(users);\n    }\n  };\n\n  const handleDelete = async (userId) => {\n    try {\n      const token = sessionStorage.getItem('authToken');\n      await axios.delete(`http://localhost:5001/api/users/${userId}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setUsers(users.filter(user => user._id !== userId));\n      setFilteredUsers(filteredUsers.filter(user => user._id !== userId));\n    } catch (error) {\n      console.error('Error deleting user:', error);\n    }\n  };\n\n  const handleBlock = async (userId) => {\n    try {\n      const token = sessionStorage.getItem('authToken');\n      await axios.put(`http://localhost:5001/api/users/${userId}`, { isBlocked: true }, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      // Update state to reflect blocked status\n      const updatedUsers = users.map(user => \n        user._id === userId ? { ...user, isBlocked: true } : user\n      );\n      setUsers(updatedUsers);\n      setFilteredUsers(updatedUsers);\n    } catch (error) {\n      console.error('Error blocking user:', error);\n    }\n  };\n\n  return (\n    <div className=\"user-management-container\">\n      <h1>User Management</h1>\n      \n      {/* Filter Checkbox */}\n      <label>\n        <input\n          type=\"checkbox\"\n          checked={showPaidOnly}\n          onChange={handleFilterChange}\n        />\n        Show Paid Photographers Only\n      </label>\n\n      <div className=\"user-cards\">\n        {filteredUsers.map(user => (\n          <div className=\"user-card\" key={user._id}>\n            <h2>{user.name}</h2>\n            <p>Email: {user.email}</p>\n            <p>Role: {user.role}</p>\n            <p>Plan: {user.planName}</p>\n            <p>Payment Status: {user.isPaid ? 'Paid' : 'Unpaid'}</p>\n            <p>Blocked: {user.isBlocked ? 'Yes' : 'No'}</p>\n            <button onClick={() => handleDelete(user._id)}>Delete</button>\n            <button onClick={() => handleBlock(user._id)} disabled={user.isBlocked}>Block</button>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default UserManagement;"],"mappings":";;;AAAA,MAAMA,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGC,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGF,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACG,YAAY,EAAEC,eAAe,CAAC,GAAGJ,QAAQ,CAAC,KAAK,CAAC;EAEvDK,SAAS,CAAC,MAAM;IACd,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAC;QACjD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACC,GAAG,CAAC,4CAA4C,EAAE;UAC7EC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUP,KAAK;UAAG;QAC9C,CAAC,CAAC;QACFR,QAAQ,CAACW,QAAQ,CAACK,IAAI,CAACjB,KAAK,CAAC;QAC7BI,gBAAgB,CAACQ,QAAQ,CAACK,IAAI,CAACjB,KAAK,CAAC,CAAC,CAAC;MACzC,CAAC,CAAC,OAAOkB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC/C;IACF,CAAC;IAEDV,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMY,kBAAkB,GAAGA,CAAA,KAAM;IAC/Bd,eAAe,CAAC,CAACD,YAAY,CAAC;IAC9B,IAAI,CAACA,YAAY,EAAE;MACjB,MAAMgB,iBAAiB,GAAGrB,KAAK,CAACsB,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,MAAM,IAAID,IAAI,CAACE,IAAI,KAAK,cAAc,CAAC;MAC3FrB,gBAAgB,CAACiB,iBAAiB,CAAC;IACrC,CAAC,MAAM;MACLjB,gBAAgB,CAACJ,KAAK,CAAC;IACzB;EACF,CAAC;EAED,MAAM0B,YAAY,GAAG,MAAOC,MAAM,IAAK;IACrC,IAAI;MACF,MAAMlB,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAC;MACjD,MAAME,KAAK,CAACe,MAAM,CAAC,mCAAmCD,MAAM,EAAE,EAAE;QAC9DZ,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUP,KAAK;QAAG;MAC9C,CAAC,CAAC;MACFR,QAAQ,CAACD,KAAK,CAACsB,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACM,GAAG,KAAKF,MAAM,CAAC,CAAC;MACnDvB,gBAAgB,CAACD,aAAa,CAACmB,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACM,GAAG,KAAKF,MAAM,CAAC,CAAC;IACrE,CAAC,CAAC,OAAOT,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C;EACF,CAAC;EAED,MAAMY,WAAW,GAAG,MAAOH,MAAM,IAAK;IACpC,IAAI;MACF,MAAMlB,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAC;MACjD,MAAME,KAAK,CAACkB,GAAG,CAAC,mCAAmCJ,MAAM,EAAE,EAAE;QAAEK,SAAS,EAAE;MAAK,CAAC,EAAE;QAChFjB,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUP,KAAK;QAAG;MAC9C,CAAC,CAAC;MACF;MACA,MAAMwB,YAAY,GAAGjC,KAAK,CAACkC,GAAG,CAACX,IAAI,IACjCA,IAAI,CAACM,GAAG,KAAKF,MAAM,GAAG;QAAE,GAAGJ,IAAI;QAAES,SAAS,EAAE;MAAK,CAAC,GAAGT,IACvD,CAAC;MACDtB,QAAQ,CAACgC,YAAY,CAAC;MACtB7B,gBAAgB,CAAC6B,YAAY,CAAC;IAChC,CAAC,CAAC,OAAOf,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C;EACF,CAAC;EAED,oBACEiB,OAAA;IAAKC,SAAS,EAAC,2BAA2B;IAAAC,QAAA,gBACxCF,OAAA;MAAAE,QAAA,EAAI;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAGxBN,OAAA;MAAAE,QAAA,gBACEF,OAAA;QACEO,IAAI,EAAC,UAAU;QACfC,OAAO,EAAEtC,YAAa;QACtBuC,QAAQ,EAAExB;MAAmB;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CAAC,gCAEJ;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eAERN,OAAA;MAAKC,SAAS,EAAC,YAAY;MAAAC,QAAA,EACxBlC,aAAa,CAAC+B,GAAG,CAACX,IAAI,iBACrBY,OAAA;QAAKC,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBF,OAAA;UAAAE,QAAA,EAAKd,IAAI,CAACsB;QAAI;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACpBN,OAAA;UAAAE,QAAA,GAAG,SAAO,EAACd,IAAI,CAACuB,KAAK;QAAA;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC1BN,OAAA;UAAAE,QAAA,GAAG,QAAM,EAACd,IAAI,CAACE,IAAI;QAAA;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACxBN,OAAA;UAAAE,QAAA,GAAG,QAAM,EAACd,IAAI,CAACwB,QAAQ;QAAA;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC5BN,OAAA;UAAAE,QAAA,GAAG,kBAAgB,EAACd,IAAI,CAACC,MAAM,GAAG,MAAM,GAAG,QAAQ;QAAA;UAAAc,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACxDN,OAAA;UAAAE,QAAA,GAAG,WAAS,EAACd,IAAI,CAACS,SAAS,GAAG,KAAK,GAAG,IAAI;QAAA;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC/CN,OAAA;UAAQa,OAAO,EAAEA,CAAA,KAAMtB,YAAY,CAACH,IAAI,CAACM,GAAG,CAAE;UAAAQ,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC9DN,OAAA;UAAQa,OAAO,EAAEA,CAAA,KAAMlB,WAAW,CAACP,IAAI,CAACM,GAAG,CAAE;UAACoB,QAAQ,EAAE1B,IAAI,CAACS,SAAU;UAAAK,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,GARxDlB,IAAI,CAACM,GAAG;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OASnC,CACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC1C,EAAA,CA5FID,cAAc;AAAAoD,EAAA,GAAdpD,cAAc;AA8FpB,eAAeA,cAAc;AAAC,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}